<!doctype html>
<html lang="sr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Karijera — Pridružite nam se | CistoMleko Pure</title>
  <style>
    :root{
      --sky:#87ceeb; --navy:#0b3d91; --white:#ffffff; --muted:#f4f7fb; --max-width:1000px;
    }
    *{box-sizing:border-box}
    body{font-family:Inter, system-ui, -apple-system, Roboto, 'Segoe UI', Arial; margin:0; background:var(--muted); color:var(--navy);}
    .container{max-width:var(--max-width); margin:32px auto; padding:20px; position:relative;}
    
    /* Header with same style as your main site */
    header{
      background:linear-gradient(90deg,var(--sky),var(--navy)); 
      color:var(--white); 
      padding:28px; 
      border-radius:12px; 
      box-shadow:0 6px 18px rgba(11,61,145,0.12);
      position:relative;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }
    header h1{margin:0;font-size:clamp(20px,4vw,32px)}
    header p{margin:8px 0 0; opacity:0.95}

    /* Language Toggle — Same as your main site */
    .language-toggle {
      background: rgba(255,255,255,0.2);
      border: 1px solid rgba(255,255,255,0.3);
      color: white;
      padding: 0.5rem 0.9rem;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.9rem;
      backdrop-filter: blur(8px);
      transition: all 0.3s;
    }
    .language-toggle:hover { background: rgba(255,255,255,0.35); }

    .jobs-grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:20px; margin-top:30px}
    .job-card{background:var(--white); border-left:6px solid var(--sky); padding:20px; border-radius:12px; box-shadow:0 6px 16px rgba(11,61,145,0.08); transition:transform .2s}
    .job-card:hover{transform:translateY(-4px)}
    .job-card h3{margin:0 0 8px; font-size:1.4rem}
    .job-meta{font-size:14px;color:#294b7a; margin-bottom:12px}
    .btn{display:inline-block;padding:10px 16px;border-radius:8px;border:none;cursor:pointer;font-weight:600; text-decoration:none}
    .btn-primary{background:var(--navy); color:var(--white)}
    .btn-primary:hover{background:#072b6e}
    .btn-outline{background:transparent; border:1.5px solid var(--navy); color:var(--navy)}
    .btn-outline:hover{background:var(--navy); color:white}

    /* Modal */
    .modal-backdrop{position:fixed; inset:0; background:rgba(3,17,39,0.5); display:none; align-items:center; justify-content:center; padding:20px; z-index:1000}
    .modal{background:var(--white); width:100%; max-width:720px; border-radius:16px; padding:32px; box-shadow:0 20px 50px rgba(0,0,0,0.2)}
    .close-btn{background:none;border:none;font-size:28px;cursor:pointer;color:#555}
    .grid-2{display:grid; grid-template-columns:1fr 1fr; gap:16px}
    label{font-weight:600; font-size:14px; color:#15335f; margin-bottom:6px; display:block}
    input, textarea, select{width:100%; padding:12px 14px; border-radius:8px; border:1px solid #d7e6fb; background:#fbfdff; font-size:15px}
    textarea{min-height:120px; resize:vertical}
    .notice{padding:14px; border-radius:8px; margin-top:16px; font-weight:500}
    .notice.success{background:#e6fff4; border:1px solid #8fe7c4; color:#0f6a45}
    .notice.error{background:#fff3f3; border:1px solid #ffb6b6; color:#7c1414}

    @media (max-width:720px){
      .grid-2{grid-template-columns:1fr}
      header{flex-direction:column; text-align:center; gap:16px}
      .language-toggle{position:static}
    }
  </style>
</head>
<body>

  <div class="container">
    <header>
      <div>
        <h1 data-en="Join Our Team" data-sr="Pridružite se našem timu">Pridružite se našem timu</h1>
        <p data-en="We are always looking for passionate people to join our family." 
           data-sr="Uvek tražimo strastvene ljude da se pridruže našoj porodici.">
          Uvek tražimo strastvene ljude da se pridruže našoj porodici.
        </p>
      </div>

      <!-- Same Toggle Button as Your Main Site -->
      <button class="language-toggle" id="lang-toggle">EN</button>
    </header>

    <main style="margin-top:40px">
      <section>
        <h2 data-en="Open Positions" data-sr="Otvorene pozicije">Otvorene pozicije</h2>
        <div class="jobs-grid" id="jobsGrid"></div>
      </section>

      <section style="margin-top:50px; text-align:center">
        <h2 data-en="Not seeing a suitable role?" data-sr="Ne vidite odgovarajuću poziciju?">
          Ne vidite odgovarajuću poziciju?
        </h2>
        <p data-en="Send us a general application — we’d love to hear from you!" 
           data-sr="Pošaljite nam opštu prijavu — rado ćemo čuti od vas!">
          Pošaljite nam opštu prijavu — rado ćemo čuti od vas!
        </p>
        <button class="btn btn-outline" id="openGeneral" style="margin-top:12px">
          <span data-en="Send General Application" data-sr="Pošalji opštu prijavu">Pošalji opštu prijavu</span>
        </button>
      </section>
    </main>
  </div>

  <!-- Modal -->
  <div class="modal-backdrop" id="modal">
    <div class="modal">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px">
        <h2 id="modalTitle">Prijavi se — Veterinar</h2>
        <button class="close-btn" id="closeModal">×</button>
      </div>

      <form id="applyForm">
        <input type="hidden" name="jobId" id="jobId" />

        <div class="grid-2">
          <div>
            <label><span data-en="Full Name" data-sr="Puno ime">Puno ime</span> <span style="color:red">*</span></label>
            <input type="text" name="fullName" required placeholder="Petar Petrović" />
          </div>
          <div>
            <label><span data-en="Email" data-sr="Email">Email</span> <span style="color:red">*</span></label>
            <input type="email" name="email" required placeholder="petar@example.com" />
          </div>
        </div>

        <div class="grid-2" style="margin-top:16px">
          <div>
            <label><span data-en="Phone" data-sr="Telefon">Telefon</span></label>
            <input type="text" name="phone" placeholder="+381 64 123 4567" />
          </div>
          <div>
            <label><span data-en="Current Location" data-sr="Trenutna lokacija">Trenutna lokacija</span></label>
            <input type="text" name="location" placeholder="Beograd, Srbija" />
          </div>
        </div>

        <div style="margin-top:16px">
          <label><span data-en="Cover Letter / Why do you want to join us?" data-sr="Propisno pismo / Zašto želite da radite kod nas?">
            Propisno pismo / Zašto želite da radite kod nas?
          </span></label>
          <textarea name="cover" placeholder="Opišite svoje kvalifikacije i motivaciju..."></textarea>
        </div>

        <div style="display:flex; gap:12px; margin-top:24px">
          <button type="submit" class="btn btn-primary">
            <span data-en="Submit Application" data-sr="Pošalji prijavu">Pošalji prijavu</span>
          </button>
          <button type="button" id="cancelBtn" class="btn btn-outline">
            <span data-en="Cancel" data-sr="Otkaži">Otkaži</span>
          </button>
        </div>

        <div id="formNotice"></div>
      </form>
    </div>
  </div>

  <script>
    // Language System (Same as your main site)
    let currentLang = localStorage.getItem('lang') || 'sr';

    function applyLanguage() {
      document.querySelectorAll('[data-en],[data-sr]').forEach(el => {
        const text = el.getAttribute(`data-${currentLang}`);
        if (text !== null) {
          if (text.includes('<')) el.innerHTML = text;
          else el.textContent = text;
        }
      });
      document.documentElement.lang = currentLang;
      document.getElementById('lang-toggle').textContent = currentLang === 'sr' ? 'EN' : 'SR';
      renderJobs();
    }

    document.getElementById('lang-toggle').addEventListener('click', () => {
      currentLang = currentLang === 'sr' ? 'en' : 'sr';
      localStorage.setItem('lang', currentLang);
      applyLanguage();
    });

    // Job Data with Translations
    const jobs = [
      {id:'vet-1', title:{sr:'Veterinar', en:'Veterinary Officer'}, type:{sr:'Puno radno vreme', en:'Full-time'}, location:{sr:'Na licu mesta (Farma)', en:'On-Site (Farm)'}, exp:{sr:'1+ godina', en:'1+ year'}, desc:{sr:'Kontrola zdravlja krava, vakcinacija, fertilitet i medicinski nadzor.', en:'Cow health check-up, vaccination, fertility & medical monitoring.'}},
      {id:'loader-1', title:{sr:'Učitavač mleka', en:'Milk Loader'}, type:{sr:'Puno radno vreme', en:'Full-time'}, location:{sr:'Na licu mesta', en:'On-Site'}, exp:{sr:'0-2 godine', en:'0-2 years'}, desc:{sr:'Utovar/istovar kanistera mleka i logistika.', en:'Milk cans loading/unloading and handling logistics.'}},
      {id:'worker-1', title:{sr:'Radnik na farmi', en:'Farm Worker'}, type:{sr:'Puno radno vreme', en:'Full-time'}, location:{sr:'Na licu mesta (Farma)', en:'On-Site (Farm)'}, exp:{sr:'0+ godina', en:'No experience'}, desc:{sr:'Dnevna nega krava, čišćenje, hranjenje.', en:'Daily cow care, cleaning, feeding & maintenance.'}},
      {id:'milker-1', title:{sr:'Muzilac', en:'Milker'}, type:{sr:'Puno radno vreme', en:'Full-time'}, location:{sr:'Na licu mesta (Farma)', en:'On-Site (Farm)'}, exp:{sr:'0-3 godine', en:'0-3 years'}, desc:{sr:'Rad sa mašinom za mužu i higijena.', en:'Milking machine operation and hygiene.'}},
      {id:'packing-1', title:{sr:'Pakovač mleka', en:'Milk Packing Staff'}, type:{sr:'Puno radno vreme', en:'Full-time'}, location:{sr:'Na licu mesta (Fabrika)', en:'On-Site (Factory)'}, exp:{sr:'0+ godina', en:'No experience'}, desc:{sr:'Pakovanje mleka u kese/bocu.', en:'Packing, sealing, labeling.'}},
      {id:'productivity-1', title:{sr:'Supervizor produktivnosti', en:'Farm Productivity Supervisor'}, type:{sr:'Puno radno vreme', en:'Full-time'}, location:{sr:'Na licu mesta (Farma)', en:'On-Site (Farm)'}, exp:{sr:'1-3 godine', en:'1-3 years'}, desc:{sr:'Poboljšanje procesa i upravljanje osobljem.', en:'Process improvement and staff management.'}}
    ];

    function renderJobs() {
      const grid = document.getElementById('jobsGrid');
      grid.innerHTML = '';
      jobs.forEach(j => {
        const card = document.createElement('div');
        card.className = 'job-card';
        card.innerHTML = `
          <h3>${j.title[currentLang]}</h3>
          <div class="job-meta">${j.type[currentLang]} • ${j.location[currentLang]} • ${j.exp[currentLang]}</div>
          <p style="margin:12px 0; line-height:1.5">${j.desc[currentLang]}</p>
          <button type="button" class="btn btn-primary" data-job="${j.id}">
            ${currentLang === 'sr' ? 'Prijavi se' : 'Apply'}
          </button>
        `;
        grid.appendChild(card);
      });
    }

    // Modal Logic
    const modal = document.getElementById('modal');
    const applyForm = document.getElementById('applyForm');
    const formNotice = document.getElementById('formNotice');

    document.addEventListener('click', e => {
      const btn = e.target.closest('button[data-job]');
      if (btn) openModal(btn.dataset.job);
    });

    document.getElementById('openGeneral').addEventListener('click', () => openModal('general'));
    document.getElementById('closeModal').addEventListener('click', () => modal.style.display = 'none');
    document.getElementById('cancelBtn').addEventListener('click', () => modal.style.display = 'none');

    function openModal(jobId) {
      document.getElementById('jobId').value = jobId;
      const job = jobs.find(j => j.id === jobId);
      const title = jobId === 'general' 
        ? (currentLang === 'sr' ? 'Opšta prijava' : 'General Application')
        : `${currentLang === 'sr' ? 'Prijavi se' : 'Apply'} — ${job.title[currentLang]}`;
      document.getElementById('modalTitle').textContent = title;
      modal.style.display = 'flex';
      formNotice.innerHTML = '';
      setTimeout(() => document.querySelector('#fullName').focus(), 100);
    }

    // Form Submit (mailto fallback)
    applyForm.addEventListener('submit', e => {
      e.preventDefault();
      const data = new FormData(applyForm);
      const payload = Object.fromEntries(data);
      if (!payload.fullName || !payload.email) {
        formNotice.innerHTML = `<div class="notice error">${currentLang === 'sr' ? 'Popunite ime i email' : 'Please fill name and email'}</div>`;
        return;
      }
      const subject = encodeURIComponent(`Prijava: ${payload.jobId} - ${payload.fullName}`);
      const body = encodeURIComponent(`Ime: ${payload.fullName}\nEmail: ${payload.email}\nTelefon: ${payload.phone}\nLokacija: ${payload.location}\n\nPoruka:\n${payload.cover}`);
      location.href = `mailto:hr@CistoMlekopure.com?subject=${subject}&body=${body}`;
      formNotice.innerHTML = `<div class="notice success">${currentLang === 'sr' ? 'Email klijent otvoren – pošaljite poruku' : 'Mail client opened – please send'}</div>`;
    });

    // Init
    applyLanguage();
    renderJobs();
    document.addEventListener('keydown', e => { if (e.key === 'Escape') modal.style.display = 'none'; });
  </script>
</body>
</html>